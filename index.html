<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DieoDex ‚Äî AI Agent Chat</title>
  <meta name="description" content="DieoDex ‚Äî –∫—Ä–∞—Å–∏–≤—ã–π —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ AI-–∞–≥–µ–Ω—Ç–∞. –ó–∞–≥–ª—É—à–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤, –≥–æ—Ç–æ–≤–æ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è OpenRouter." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg">
    <div class="orb o1"></div>
    <div class="orb o2"></div>
    <div class="orb o3"></div>
    <div class="grain"></div>
  </div>

  <div class="app" id="app">
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 64 64" fill="none">
            <path d="M12 20c10-14 30-14 40 0" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
            <path d="M12 44c10 14 30 14 40 0" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
            <path d="M20 32h24" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
            <circle cx="20" cy="32" r="3" fill="currentColor"/>
            <circle cx="44" cy="32" r="3" fill="currentColor"/>
          </svg>
        </div>
        <div class="brand-text">
          <div class="brand-name">DieoDex</div>
          <div class="brand-sub">AI Agent Console</div>
        </div>
      </div>

      <button class="btn btn-primary newchat" id="newChatBtn">
        <span class="btn-ic" aria-hidden="true">Ôºã</span>
        –ù–æ–≤—ã–π —á–∞—Ç
      </button>

      <div class="panel">
        <div class="panel-title">–°–µ—Å—Å–∏–∏</div>
        <div class="sessions" id="sessionList"></div>
      </div>

      <div class="panel">
        <div class="panel-title">–†–µ–∂–∏–º –∞–≥–µ–Ω—Ç–∞</div>
        <div class="agent-card">
          <div class="agent-row">
            <div class="agent-badge" id="agentBadge">CO</div>
            <div class="agent-meta">
              <div class="agent-name" id="agentName">Codex-like</div>
              <div class="agent-desc" id="agentDesc">–ü–ª–∞–Ω–∏—Ä—É–µ—Ç —à–∞–≥–∏ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ</div>
            </div>
          </div>
          <div class="agent-controls">
            <button class="chip" data-agent="codex" aria-pressed="true">Codex-like</button>
            <button class="chip" data-agent="helper" aria-pressed="false">Helper</button>
            <button class="chip" data-agent="dev" aria-pressed="false">Dev</button>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <button class="btn btn-ghost" id="settingsBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
          <span class="btn-ic" aria-hidden="true">‚öô</span>
          –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
        <button class="btn btn-ghost" id="themeBtn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
          <span class="btn-ic" aria-hidden="true">‚òæ</span>
          –¢–µ–º–∞
        </button>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <button class="iconbtn mobile-only" id="menuBtn" title="–ú–µ–Ω—é" aria-label="–ú–µ–Ω—é">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>

        <div class="topbar-center">
          <div class="title">
            <span class="pulse" aria-hidden="true"></span>
            <span id="chatTitle">DieoDex Chat</span>
            <span class="beta">BETA</span>
          </div>
          <div class="subtitle" id="chatSubtitle">–ó–∞–≥–ª—É—à–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤. –ü–æ–¥–∫–ª—é—á–∏—à—å OpenRouter ‚Äî –±—É–¥–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π –∞–≥–µ–Ω—Ç.</div>
        </div>

        <div class="topbar-actions">
          <button class="iconbtn" id="exportBtn" title="–≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞" aria-label="–≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M7 7h10M7 11h10M7 15h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"/>
            </svg>
          </button>
          <button class="iconbtn" id="clearBtn" title="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç" aria-label="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M9 3h6M4 6h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 6l1 15h8l1-15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </header>

      <section class="chat" id="chat">
        <div class="chat-inner" id="chatInner">
          <div class="hero" id="hero">
            <div class="hero-badge">DieoDex</div>
            <h1>–ß–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç</h1>
            <p>–≠—Ç–æ –∫—Ä–∞—Å–∏–≤–∞—è –∑–∞–≥–æ—Ç–æ–≤–∫–∞: –∞–Ω–∏–º–∞—Ü–∏–∏, —Å–µ—Å—Å–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç, —Ç–µ–º—ã, —Å—Ç—Ä–∏–º–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞. –°–µ–π—á–∞—Å –æ—Ç–≤–µ—Ç—ã ‚Äî –∑–∞–≥–ª—É—à–∫–∏. –ü–æ—Ç–æ–º –ø–æ–¥–∫–ª—é—á–∏—à—å OpenRouter.</p>
            <div class="hero-actions">
              <button class="btn btn-primary" id="tryDemoBtn">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ–º–æ</button>
              <button class="btn btn-ghost" id="openApiHintBtn">–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenRouter?</button>
            </div>
            <div class="hero-cards">
              <div class="mini-card">
                <div class="mini-title">‚ú® –°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞</div>
                <div class="mini-text">–¢–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º + –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–∞</div>
              </div>
              <div class="mini-card">
                <div class="mini-title">üß† –ê–≥–µ–Ω—Ç-—Ä–µ–∂–∏–º—ã</div>
                <div class="mini-text">Codex-like / Helper / Dev</div>
              </div>
              <div class="mini-card">
                <div class="mini-title">üóÇ –°–µ—Å—Å–∏–∏</div>
                <div class="mini-text">–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ –≤ LocalStorage</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="composer">
        <div class="composer-inner">
          <div class="model-pill" id="modelPill" title="–ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞">Model: placeholder</div>

          <div class="input-wrap">
            <textarea id="prompt" rows="1" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶ (Enter = –æ—Ç–ø—Ä–∞–≤–∏—Ç—å, Shift+Enter = –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞)"></textarea>
            <div class="input-actions">
              <button class="iconbtn" id="attachBtn" title="–í–ª–æ–∂–µ–Ω–∏–µ (–∑–∞–≥–ª—É—à–∫–∞)" aria-label="–í–ª–æ–∂–µ–Ω–∏–µ">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                  <path d="M21 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1L14.5 4.8a3.5 3.5 0 0 1 5 5L10 19.3a2 2 0 1 1-2.8-2.8l8.5-8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="send" id="sendBtn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                <span class="send-glow" aria-hidden="true"></span>
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                  <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M22 2l-7 20-4-9-9-4 20-7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="hint">
            <span class="dot"></span>
            <span>–ü–æ–¥—Å–∫–∞–∑–∫–∞: –æ—Ç–∫—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –≤—Å—Ç–∞–≤—å OpenRouter endpoint/–º–æ–¥–µ–ª—å –ø–æ–∑–∂–µ (–∫–ª—é—á –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è).</span>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="settingsModal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
      <div class="modal-head">
        <div class="modal-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ DieoDex</div>
        <button class="iconbtn" data-close="1" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="grid">
          <div class="field">
            <label>Endpoint (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)</label>
            <input id="endpointInput" placeholder="https://openrouter.ai/api/v1/chat/completions" />
            <div class="field-help">–û—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º ‚Äî –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç –∑–∞–≥–ª—É—à–∫–∏.</div>
          </div>

          <div class="field">
            <label>–ú–æ–¥–µ–ª—å (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)</label>
            <input id="modelInput" placeholder="openai/gpt-4o-mini –∏–ª–∏ meta-llama/..." />
            <div class="field-help">–ü–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –≤ OpenRouter.</div>
          </div>

          <div class="field">
            <label>API –∫–ª—é—á (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º)</label>
            <input id="apiKeyInput" type="password" placeholder="sk-or-..." />
            <div class="field-help warn">‚ö†Ô∏è –°–µ–π—á–∞—Å –∫–ª—é—á –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è. –ù–µ –≤—Å—Ç–∞–≤–ª—è–π, –µ—Å–ª–∏ –Ω–µ –Ω–∞–¥–æ.</div>
          </div>

          <div class="field">
            <label>–¢–µ–º–ø ‚Äú–ø–µ—á–∞—Ç–∞–Ω–∏—è‚Äù</label>
            <input id="typingSpeed" type="range" min="8" max="40" value="18" />
            <div class="field-help">–ú–µ–Ω—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ.</div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row">
          <div class="row-left">
            <div class="row-title">–•—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</div>
            <div class="row-sub">LocalStorage (–Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ). –ú–æ–∂–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å.</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="persistToggle" checked />
            <span class="slider"></span>
          </label>
        </div>

        <div class="row">
          <div class="row-left">
            <div class="row-title">–ó–≤—É–∫–∏</div>
            <div class="row-sub">–õ—ë–≥–∫–∏–µ –∫–ª–∏–∫–∏/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ—á–µ–Ω—å —Ç–∏—Ö–æ).</div>
          </div>
          <label class="switch">
            <input type="checkbox" id="soundToggle" />
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <div class="modal-foot">
        <button class="btn btn-ghost" data-close="1">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="btn btn-primary" id="saveSettingsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- API Hint Modal -->
  <div class="modal" id="apiHintModal" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenRouter">
      <div class="modal-head">
        <div class="modal-title">–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenRouter –ø–æ–∑–∂–µ</div>
        <button class="iconbtn" data-close="1" aria-label="–ó–∞–∫—Ä—ã—Ç—å">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <ol class="steps">
          <li><b>–ù–µ –≤—Å—Ç–∞–≤–ª—è–π –∫–ª—é—á –≤ —Ñ—Ä–æ–Ω—Ç</b>, –µ—Å–ª–∏ —Å–∞–π—Ç –ø—É–±–ª–∏—á–Ω—ã–π. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ backend (Cloudflare Worker).</li>
          <li>–í Worker —Ö—Ä–∞–Ω–∏ –∫–ª—é—á –∫–∞–∫ <b>Secret</b> –∏ –¥–µ–ª–∞–π –∑–∞–ø—Ä–æ—Å –Ω–∞ OpenRouter –æ—Ç—Ç—É–¥–∞.</li>
          <li>–§—Ä–æ–Ω—Ç (—ç—Ç–æ—Ç —Å–∞–π—Ç) –¥–µ–ª–∞–µ—Ç <code>fetch()</code> –Ω–∞ —Ç–≤–æ–π Worker endpoint –∏ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç.</li>
          <li>–•–æ—á–µ—à—å ‚Äî —è –¥–∞–º –≥–æ—Ç–æ–≤—ã–π Worker-–∫–æ–¥ –ø–æ–¥ OpenRouter + CORS.</li>
        </ol>
        <div class="codebox">
          <div class="codebox-title">–°—Ö–µ–º–∞</div>
          <pre><code>Browser (Pages)  ‚Üí  Worker (secret key)  ‚Üí  OpenRouter</code></pre>
        </div>
      </div>
      <div class="modal-foot">
        <button class="btn btn-primary" data-close="1">–ü–æ–Ω—è–ª</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
